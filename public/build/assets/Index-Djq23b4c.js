import{p as g,q as N,n as v,u as F,c as r,o as n,a as y,b as o,h as V,w,d as e,g as d,t as i,f as h,i as f,F as _,r as B,e as k}from"./app-DedpZJ8o.js";import{_ as E}from"./AuthenticatedLayout-BV199nJ0.js";import{l as I,_ as q}from"./lodash-Mwilpz-L.js";import"./ApplicationLogo-Cjgy5LJa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},P={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},T={class:"p-6 text-gray-900"},U={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert"},O={class:"block sm:inline"},z={class:"flex justify-between items-center mb-4"},K={class:"flex items-center gap-4"},L=["href"],H={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap"},Q=["src"],R={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-xs"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},ee=["onClick"],te=["href"],se=["onClick"],oe={key:0},ae={class:"mt-6"},le={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},re={class:"flex justify-between items-center border-b pb-3"},ne={class:"text-2xl font-semibold"},ie={class:"mb-4 text-center"},de=["src"],ce={key:1,class:"w-32 h-32 rounded-full bg-gray-200 mx-auto flex items-center justify-center text-gray-500"},ue={class:"mb-4"},pe=["value"],me={key:1,class:"text-sm text-red-600 mt-1"},xe={class:"mb-4"},ge={key:0,class:"text-sm text-red-600 mt-1"},he={class:"mb-4"},fe={key:0,class:"text-sm text-red-600 mt-1"},be={class:"mb-4"},ye={key:0,class:"text-sm text-red-600 mt-1"},ve={class:"flex justify-end mt-6"},we=["disabled"],Me={__name:"Index",props:{students:Object,filters:Object},setup(u){const b=g(u.filters.search||"");N(b,I.debounce(l=>{v.get(route("students.index"),{search:l},{preserveState:!0,replace:!0})},300));const p=g(!1),m=g(!1),x=g(null),t=F({id:null,name:"",nis:"",class:"",photo:null}),S=()=>{t.reset(),p.value=!1,m.value=!0},C=l=>{t.id=l.id,t.name=l.name,t.nis=l.nis,t.class=l.class,x.value=l.photo?`/storage/${l.photo}`:null,p.value=!0,m.value=!0},c=()=>{m.value=!1,t.reset(),x.value=null},j=()=>{p.value?t.put(route("students.update",t.id),{preserveScroll:!0,onSuccess:()=>c()}):t.post(route("students.store"),{preserveScroll:!0,onSuccess:()=>c()})},$=l=>{confirm("Apakah Anda yakin ingin menghapus siswa ini?")&&v.delete(route("students.destroy",l),{preserveScroll:!0})};return(l,s)=>(n(),r(_,null,[y(o(V),{title:"Daftar Siswa"}),y(E,null,{header:w(()=>[...s[6]||(s[6]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Manajemen Siswa",-1)])]),default:w(()=>[e("div",A,[e("div",D,[e("div",P,[e("div",T,[l.$page.props.flash&&l.$page.props.flash.message?(n(),r("div",U,[e("span",O,i(l.$page.props.flash.message),1)])):d("",!0),e("div",z,[e("div",K,[e("button",{onClick:S,class:"inline-block bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700"}," + Tambah Siswa Baru "),e("a",{href:l.route("students.idcard.all"),class:"inline-block bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700"}," 🖨️ Cetak Semua ID Card ",8,L)]),h(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),type:"text",placeholder:"Cari nama, nis, kelas...",class:"border-gray-300 rounded-md shadow-sm w-1/3"},null,512),[[f,b.value]])]),e("table",H,[s[8]||(s[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Foto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"NIS"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kelas"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",G,[(n(!0),r(_,null,B(u.students.data,a=>(n(),r("tr",{key:a.id},[e("td",J,[a.photo?(n(),r("img",{key:0,src:`/storage/${a.photo}`,alt:"Foto Siswa",class:"h-10 w-10 rounded-full object-cover"},null,8,Q)):(n(),r("span",R,"No Pic"))]),e("td",W,i(a.name),1),e("td",X,i(a.nis),1),e("td",Y,i(a.class),1),e("td",Z,[e("button",{onClick:M=>C(a),class:"text-indigo-600 hover:text-indigo-900"},"Edit",8,ee),e("a",{href:l.route("students.idcard",a.id),target:"_blank",class:"ml-4 text-green-600 hover:text-green-900"},"Cetak",8,te),e("button",{onClick:M=>$(a.id),class:"ml-4 text-red-600 hover:text-red-900"},"Hapus",8,se)])]))),128)),u.students.data.length===0?(n(),r("tr",oe,[...s[7]||(s[7]=[e("td",{colspan:"6",class:"text-center py-4 text-gray-500"},"Tidak ada data siswa yang ditemukan.",-1)])])):d("",!0)])]),e("div",ae,[y(q,{links:u.students.links},null,8,["links"])])])])])]),m.value?(n(),r("div",le,[e("div",{onClick:c,class:"absolute inset-0 bg-gray-900 opacity-50"}),e("div",{class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full p-6 z-10",onClick:s[5]||(s[5]=k(()=>{},["stop"]))},[e("div",re,[e("h3",ne,i(p.value?"Edit Siswa":"Tambah Siswa Baru"),1),e("button",{onClick:c,class:"text-gray-500 hover:text-gray-800 text-2xl"},"×")]),e("form",{onSubmit:k(j,["prevent"]),class:"mt-4"},[e("div",ie,[x.value?(n(),r("img",{key:0,src:x.value,alt:"Preview Foto",class:"w-32 h-32 rounded-full object-cover mx-auto"},null,8,de)):(n(),r("div",ce," Preview "))]),e("div",ue,[s[9]||(s[9]=e("label",{for:"photo",class:"block text-sm font-medium text-gray-700"},"Foto",-1)),e("input",{onInput:s[1]||(s[1]=a=>o(t).photo=a.target.files[0]),type:"file",id:"photo",class:"mt-1 block w-full"},null,32),o(t).progress?(n(),r("progress",{key:0,value:o(t).progress.percentage,max:"100",class:"w-full mt-2"},i(o(t).progress.percentage)+"% ",9,pe)):d("",!0),o(t).errors.photo?(n(),r("p",me,i(o(t).errors.photo),1)):d("",!0)]),e("div",xe,[s[10]||(s[10]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Nama Lengkap",-1)),h(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>o(t).name=a),type:"text",id:"name",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[f,o(t).name]]),o(t).errors.name?(n(),r("p",ge,i(o(t).errors.name),1)):d("",!0)]),e("div",he,[s[11]||(s[11]=e("label",{for:"nis",class:"block text-sm font-medium text-gray-700"},"NIS",-1)),h(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>o(t).nis=a),type:"text",id:"nis",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[f,o(t).nis]]),o(t).errors.nis?(n(),r("p",fe,i(o(t).errors.nis),1)):d("",!0)]),e("div",be,[s[12]||(s[12]=e("label",{for:"class",class:"block text-sm font-medium text-gray-700"},"Kelas",-1)),h(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>o(t).class=a),type:"text",id:"class",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[f,o(t).class]]),o(t).errors.class?(n(),r("p",ye,i(o(t).errors.class),1)):d("",!0)]),e("div",ve,[e("button",{type:"button",onClick:c,class:"mr-3 bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-400"}," Batal "),e("button",{type:"submit",disabled:o(t).processing,class:"bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50"}," Simpan ",8,we)])],32)])])):d("",!0)]),_:1})],64))}};export{Me as default};
